<!DOCTYPE html>
<html>

<head>
    <title>getGold</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <style type="text/css">
    .container {
        width: 60%;
        margin: 0 auto;
        border: 1px solid #ccc;
        text-align: center;
    }
    
    input {
        width: 80%;
        margin: 20px 0;
        height: 30px;
        border: 1px solid #00f;
    }
    </style>
</head>

<body>
    <div class="container">
        <div class="ct">
            <div>ID
                <span>(去金币页面获取：console.log($(".task-list li").attr("data-id"));)</span>
            </div>
            <input type="text" id="data_id">
        </div>
        <div class="ct">
            <div>TOKEN
                <span>(去金币页面获取：console.log(url("?accessToken"));)</span>
            </div>
            <input type="text" id="data_token">
        </div>
        <button type="button">开始</button>
    </div>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
    // var dataid = $(".task-list li").attr("data-id");
    // var dataid = 23761;
    var dataid = $.trim($("#data_id").val());
    // var token = url("?accessToken");
    // var token = "TVRNNU1UZzJNalEyT1RZLi1ALU9UVTFZV0l3TVRNMk56UXhaV1ZrTXpFeVpqY3dORFZpWm1SalkyTm1NV0kuLUAtMTQ1MDIyOTE3OTM3OC1ALWQyVnBlR2x1";
    var token = $.trim($("#data_token").val());

    function getGold() {
        var dt = new Date;
        var h = dt.getHours();
        var m = dt.getMinutes();

        // 0--31
        var idx = (h - 7) * 2 + (m > 29 ? 1 : 0);
        $.post("http://todaytask.x3china.com/newTodayTask/task/gold/addGold?timestamp=" + (+dt), {
            accessToken: token,
            taskId: dataid,
            dateIndex: idx,
            xy: xy(dataid, idx)
        }).done(function(e) {
            if (!e.errorCode) {
                console.log(h + ":" + m + ",成功");
            } else {
                console.log(h + ":" + m + ",失败");
            }
            console.dir(e);
        }).fail(function(e) {
            console.log(h + ":" + m + ",失败");
            console.dir(e);
        });
    }
    $("button").click(function() {
        conso
        setInterval(getGold, 1000 * 60);
    });
    </script>
</body>

</html>